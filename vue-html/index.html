<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>vue笔记</title>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <!-- <script src="./js/Array变化侦测.js"></script> -->
  <script src="./js/自定义指令.js"></script>
</head>
<body>

  <div id="App">
    <p v-color="'red'">使用动态指令参数修改标签样式</p>
  </div>

</body>
<script>
  const vm = new Vue({
    el: "#App",
    data: {
      name: "vue"
    },
    directives: {
      color: {
        bind: function(el, binding, vnode) {
          // 只调用一次，指令第一次绑定到元素时调用。在这里可以进行一次性的初始化设置。
          console.log("自定义组件钩子：bind");
          // console.log(el, binding, vnode);
          el.style.color = binding.value;
        },
        inserted: function(el) {
          // 被绑定元素插入父节点时调用 (仅保证父节点存在，但不一定已被插入文档中)。
          // 如input获取焦点 el.focus() 需要当前节点插入父节点时调用
          console.log("自定义组件钩子：inserted");
        },
        update: function() {
          // 所在组件的 VNode 更新时调用，但是可能发生在其子 VNode 更新之前。
          console.log("自定义组件钩子：update");
        },
        componentUpdated: function() {
          // 指令所在组件的 VNode 及其子 VNode 全部更新后调用。
          console.log("自定义组件钩子：componentUpdated");
        },
        unbind: function() {
          // 只调用一次，指令与元素解绑时调用。
          console.log("自定义组件钩子：unbind");
        }
      }
    }
  });
</script>
</html>

<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #ffffff;
        }
        .pic {
            width: 50px;
            height: 50px;
            position: absolute;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            margin: auto;
        }
        .pic i {
            display: block;
            float: left;
            width: 6px;
            height: 50px;
            background: #399;
            margin: 0 2px;
            transform: scaleY(0.4);
            animation: load 1s infinite;
        }
        .pic i:nth-child(1) {
        }
        .pic i:nth-child(2) {
            animation-delay: 0.1s;
        }
        .pic i:nth-child(3) {
            animation-delay: 0.2s;
        }
        .pic i:nth-child(4) {
            animation-delay: 0.3s;
        }
        .pic i:nth-child(5) {
            animation-delay: 0.4s;
        }
        @keyframes load {
            0%, 40%, 100% {
                transform: scaleY(0.4);
            }
            20% {
                transform: scaleY(1);
            }
        }
        .top-loading {
            position: fixed;
            top: 0;
            left: 0;
            z-index: 100;
            width: 0;
            height: 2px;
            background: #d43c33;
        }
        .loading-percent {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        .loading-percent .wp {
            position: absolute;
            top: 10px;
            left: 10px;
            width: 100px;
            height: 100px;
            text-align: center;
            line-height: 100px;
        }
        .loading-percent .wp .y {
            width: 80px;
            height: 80px;
            display: block;
            position: absolute;
            top: 10px;
            left: 10px;
            border-radius: 50%;
            box-shadow: 0 3px 0 #333;
            animation: rotate 1s infinite linear;
        }
        @keyframes rotate {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
    </style>
    <script src="./../jquery.min.js"></script>
    <!--监听页面加载-->
    <!--<script>
        document.onreadystatechange = function () {
            if(document.readyState === 'complete'){
                $('.loading').fadeOut();
            }
        }
    </script>-->
</head>
<body>
<div class="loading">
    <div class="pic">
        <i></i><i></i><i></i><i></i><i></i>
    </div>
</div>
<div class="top-loading"></div>
<div class="loading-percent">
    <div class="wp">
        <span class="y"></span>
        <b>0%</b>
    </div>
</div>

<div class="page">
    <img src="http://pic1.win4000.com/wallpaper/7/5826e67f4ca1c.jpg"/>
    <img src="http://pic1.win4000.com/wallpaper/7/5826e681cd826.jpg"/>
    <img src="http://pic1.win4000.com/wallpaper/d/582ac678dab1e.jpg"/>
    <img src="http://pic1.win4000.com/wallpaper/b/5417a5e2b48a4.jpg"/>
    <img src="http://pic1.win4000.com/wallpaper/e/541169c816a71.jpg"/>
</div>
<script>
    $('.top-loading').animate({width: '30%'}, 300);
</script>
<div class="page">
    <img src="http://pic1.win4000.com/wallpaper/7/5826e67f4ca1c.jpg"/>
    <img src="http://pic1.win4000.com/wallpaper/7/5826e681cd826.jpg"/>
    <img src="http://pic1.win4000.com/wallpaper/d/582ac678dab1e.jpg"/>
    <img src="http://pic1.win4000.com/wallpaper/b/5417a5e2b48a4.jpg"/>
    <img src="http://pic1.win4000.com/wallpaper/e/541169c816a71.jpg"/>
</div>
<script>
    $('.top-loading').animate({width: '65%'}, 300);
</script>
<div class="page">
    <img src="http://pic1.win4000.com/wallpaper/7/5826e67f4ca1c.jpg"/>
    <img src="http://pic1.win4000.com/wallpaper/7/5826e681cd826.jpg"/>
    <img src="http://pic1.win4000.com/wallpaper/d/582ac678dab1e.jpg"/>
    <img src="http://pic1.win4000.com/wallpaper/b/5417a5e2b48a4.jpg"/>
    <img src="http://pic1.win4000.com/wallpaper/e/541169c816a71.jpg"/>
</div>
<script>
    $('.top-loading').animate({width: '100%'}, 300, function () {
        $('.loading').fadeOut();
    });
</script>
</body>
<script>
    $(function () {
        var img = $('img');
        var num = 0;
        img.each(function (i) {
            var oImg = new Image();
            oImg.onload = function () {
                oImg.onload = null;
                num++;
                $('.loading-percent b').html(parseInt(num / img.length * 100) + '%');
                if (num >= i) {
                    $('.loading-percent').fadeOut();
                }
            };
            oImg.src = img[i].src;
        });
    })
</script>
</html>